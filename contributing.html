<!DOCTYPE html>

<html class="no-js" data-content_root="./" lang="zh-CN">
<head><meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="light dark" name="color-scheme"/><meta content="width=device-width, initial-scale=1" name="viewport">
<link href="genindex.html" rel="index" title="索引"/><link href="search.html" rel="search" title="搜索"/><link href="releasing.html" rel="next" title="准备发布"/><link href="history.html" rel="prev" title="发布历史"/>
<link href="_static/favicon-32.png" rel="shortcut icon"/><!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
<title>为 Trio 及相关项目做出贡献 - Trio 0.27.0+dev 文档</title>
<link href="_static/pygments.css?v=fa44fd50" rel="stylesheet" type="text/css"/>
<link href="_static/styles/furo.css?v=354aac6f" rel="stylesheet" type="text/css"/>
<link href="_static/sphinx-codeautolink.css?v=125d5c1c" rel="stylesheet" type="text/css"/>
<link href="_static/tabs.css?v=4c969af8" rel="stylesheet" type="text/css"/>
<link href="_static/copybutton.css?v=76b2166b" rel="stylesheet" type="text/css"/>
<link href="_static/hackrtd.css?v=2d9fc201" rel="stylesheet" type="text/css"/>
<link href="_static/styles/furo-extensions.css?v=302659d7" rel="stylesheet" type="text/css"/>
<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></meta></head>
<body>
<script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
<svg style="display: none;" xmlns="http://www.w3.org/2000/svg">
<symbol id="svg-toc" viewbox="0 0 24 24">
<title>Contents</title>
<svg fill="currentColor" stroke="currentColor" stroke-width="0" viewbox="0 0 1024 1024">
<path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"></path>
</svg>
</symbol>
<symbol id="svg-menu" viewbox="0 0 24 24">
<title>Menu</title>
<svg class="feather-menu" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<line x1="3" x2="21" y1="12" y2="12"></line>
<line x1="3" x2="21" y1="6" y2="6"></line>
<line x1="3" x2="21" y1="18" y2="18"></line>
</svg>
</symbol>
<symbol id="svg-arrow-right" viewbox="0 0 24 24">
<title>Expand</title>
<svg class="feather-chevron-right" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<polyline points="9 18 15 12 9 6"></polyline>
</svg>
</symbol>
<symbol id="svg-sun" viewbox="0 0 24 24">
<title>Light mode</title>
<svg class="feather-sun" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<circle cx="12" cy="12" r="5"></circle>
<line x1="12" x2="12" y1="1" y2="3"></line>
<line x1="12" x2="12" y1="21" y2="23"></line>
<line x1="4.22" x2="5.64" y1="4.22" y2="5.64"></line>
<line x1="18.36" x2="19.78" y1="18.36" y2="19.78"></line>
<line x1="1" x2="3" y1="12" y2="12"></line>
<line x1="21" x2="23" y1="12" y2="12"></line>
<line x1="4.22" x2="5.64" y1="19.78" y2="18.36"></line>
<line x1="18.36" x2="19.78" y1="5.64" y2="4.22"></line>
</svg>
</symbol>
<symbol id="svg-moon" viewbox="0 0 24 24">
<title>Dark mode</title>
<svg class="icon-tabler-moon" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
<path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"></path>
</svg>
</symbol>
<symbol id="svg-sun-with-moon" viewbox="0 0 24 24">
<title>Auto light/dark, in light mode</title>
<svg class="icon-custom-derived-from-feather-sun-and-tabler-moon" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z" style="opacity: 50%"></path>
<line x1="14.5" x2="14.5" y1="3.25" y2="1.25"></line>
<line x1="14.5" x2="14.5" y1="15.85" y2="17.85"></line>
<line x1="10.044" x2="8.63" y1="5.094" y2="3.68"></line>
<line x1="19" x2="20.414" y1="14.05" y2="15.464"></line>
<line x1="8.2" x2="6.2" y1="9.55" y2="9.55"></line>
<line x1="20.8" x2="22.8" y1="9.55" y2="9.55"></line>
<line x1="10.044" x2="8.63" y1="14.006" y2="15.42"></line>
<line x1="19" x2="20.414" y1="5.05" y2="3.636"></line>
<circle cx="14.5" cy="9.55" r="3.6"></circle>
</svg>
</symbol>
<symbol id="svg-moon-with-sun" viewbox="0 0 24 24">
<title>Auto light/dark, in dark mode</title>
<svg class="icon-custom-derived-from-feather-sun-and-tabler-moon" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"></path>
<line style="opacity: 50%" x1="18" x2="18" y1="3.705" y2="2.5"></line>
<line style="opacity: 50%" x1="18" x2="18" y1="11.295" y2="12.5"></line>
<line style="opacity: 50%" x1="15.316" x2="14.464" y1="4.816" y2="3.964"></line>
<line style="opacity: 50%" x1="20.711" x2="21.563" y1="10.212" y2="11.063"></line>
<line style="opacity: 50%" x1="14.205" x2="13.001" y1="7.5" y2="7.5"></line>
<line style="opacity: 50%" x1="21.795" x2="23" y1="7.5" y2="7.5"></line>
<line style="opacity: 50%" x1="15.316" x2="14.464" y1="10.184" y2="11.036"></line>
<line style="opacity: 50%" x1="20.711" x2="21.563" y1="4.789" y2="3.937"></line>
<circle cx="18" cy="7.5" r="2.169" style="opacity: 50%"></circle>
</svg>
</symbol>
<symbol id="svg-pencil" viewbox="0 0 24 24">
<svg class="icon-tabler-pencil-code" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4"></path>
<path d="M13.5 6.5l4 4"></path>
<path d="M20 21l2 -2l-2 -2"></path>
<path d="M17 17l-2 2l2 2"></path>
</svg>
</symbol>
<symbol id="svg-eye" viewbox="0 0 24 24">
<svg class="icon-tabler-eye-code" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M0 0h24v24H0z" fill="none" stroke="none"></path>
<path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0"></path>
<path d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008"></path>
<path d="M20 21l2 -2l-2 -2"></path>
<path d="M17 17l-2 2l2 2"></path>
</svg>
</symbol>
</svg>
<input class="sidebar-toggle" id="__navigation" name="__navigation" type="checkbox"/>
<input class="sidebar-toggle" id="__toc" name="__toc" type="checkbox"/>
<label class="overlay sidebar-overlay" for="__navigation">
<div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
<div class="visually-hidden">Hide table of contents sidebar</div>
</label>
<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>
<div class="page">
<header class="mobile-header">
<div class="header-left">
<label class="nav-overlay-icon" for="__navigation">
<div class="visually-hidden">Toggle site navigation sidebar</div>
<i class="icon"><svg><use href="#svg-menu"></use></svg></i>
</label>
</div>
<div class="header-center">
<a href="index.html"><div class="brand">Trio 0.27.0+dev 文档</div></a>
</div>
<div class="header-right">
<div class="theme-toggle-container theme-toggle-header">
<button class="theme-toggle">
<div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
<svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
<svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
<svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
<svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
</button>
</div>
<label class="toc-overlay-icon toc-header-icon" for="__toc">
<div class="visually-hidden">Toggle table of contents sidebar</div>
<i class="icon"><svg><use href="#svg-toc"></use></svg></i>
</label>
</div>
</header>
<aside class="sidebar-drawer">
<div class="sidebar-container">
<div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
<div class="sidebar-logo-container">
<img alt="Logo" class="sidebar-logo" src="_static/wordmark-transparent.svg"/>
</div>
<span class="sidebar-brand-text">Trio 0.27.0+dev 文档</span>
</a><form action="search.html" class="sidebar-search-container" method="get" role="search">
<input aria-label="搜索" class="sidebar-search" name="q" placeholder="搜索"/>
<input name="check_keywords" type="hidden" value="yes"/>
<input name="area" type="hidden" value="default"/>
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
<p class="caption" role="heading"><span class="caption-text">Trio 友好且全面的手册：</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="awesome-trio-libraries.html">超棒的 Trio 库</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="ref-core/index.html">Trio 的核心功能</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Trio 的核心功能</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="ref-core/run.html">运行 Trio</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-core/general_principles.html">一般原则</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-core/time_clock.html">时间和时钟</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-core/cancel_timeout.html">取消和超时</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-core/tasks.html">任务</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-core/task_local_storeage.html">任务存储</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-core/task_sync.html">任务同步和通信</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-core/note_async_generator.html">异步生成器注意事项</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-core/threads.html">线程（如果必须）</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-core/debugging.html">交互式调试</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-core/exc_warn.html">异常和警告</a></li>
</ul>
</input></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="ref-io/index.html">Trio 中的 I/O</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Trio 中的 I/O</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="ref-io/abs_api.html">抽象流 API</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-io/low_level.html">使用 <code class="xref py py-mod docutils literal notranslate"><span class="pre">trio.socket</span></code> 进行低级网络编程</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-io/async_file_io.html">异步文件系统 I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-io/subprocess.html">生成子进程</a></li>
<li class="toctree-l2"><a class="reference internal" href="ref-io/signals.html">信号</a></li>
</ul>
</input></li>
<li class="toctree-l1"><a class="reference internal" href="reference-testing.html">Trio 中的测试</a></li>
<li class="toctree-l1"><a class="reference internal" href="reference-lowlevel.html">自省和扩展 Trio</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">设计和内部结构</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">发布历史</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">为 Trio 及相关项目做出贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="releasing.html">准备发布</a></li>
<li class="toctree-l1"><a class="reference internal" href="code-of-conduct.html">行为守则</a></li>
</ul>
</div>
</div>
</div>
</div>
</aside>
<div class="main">
<div class="content">
<div class="article-container">
<a class="back-to-top muted-link" href="#">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
</svg>
<span>Back to top</span>
</a>
<div class="content-icon-container">
<div class="view-this-page">
<a class="muted-link" href="https://github.com/hellowac/trio-zh-cn/blob/sync-docs/cn_docs/source/contributing.rst?plain=true" title="View this page">
<svg><use href="#svg-eye"></use></svg>
<span class="visually-hidden">View this page</span>
</a>
</div><div class="edit-this-page">
<a class="muted-link" href="https://github.com/hellowac/trio-zh-cn/edit/sync-docs/cn_docs/source/contributing.rst" title="Edit this page">
<svg><use href="#svg-pencil"></use></svg>
<span class="visually-hidden">Edit this page</span>
</a>
</div><div class="theme-toggle-container theme-toggle-content">
<button class="theme-toggle">
<div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
<svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
<svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
<svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
<svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
</button>
</div>
<label class="toc-overlay-icon toc-content-icon" for="__toc">
<div class="visually-hidden">Toggle table of contents sidebar</div>
<i class="icon"><svg><use href="#svg-toc"></use></svg></i>
</label>
</div>
<article id="furo-main-content" role="main">
<section id="trio">
<span id="contributing"></span><h1>为 Trio 及相关项目做出贡献<a class="headerlink" href="#trio" title="Link to this heading">¶</a></h1>
<p><strong>Contributing to Trio and related projects</strong></p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"/><label class="tab-label" for="tab-set--0-input--1">中文</label><div class="tab-content docutils container">
<p>你有兴趣为 Trio 或 <a class="reference external" href="https://github.com/python-trio">我们的相关项目</a> 做贡献吗？太棒了！Trio 是一个由非正式志愿者团队维护的开源项目。我们的目标是让 Python 中的异步 I/O 更加有趣、易用和可靠，而我们无法在没有像你这样的人帮助的情况下完成这一目标。我们欢迎任何愿意与其他贡献者和社区成员真诚合作的人参与贡献（另见我们的 <a class="reference internal" href="code-of-conduct.html#code-of-conduct"><span class="std std-ref">行为准则</span></a>）。</p>
<p>贡献的方式有很多种，任何贡献都不会被忽视，所有贡献都受到重视。例如，你可以：</p>
<ul class="simple">
<li><p>在我们的 <a class="reference external" href="https://gitter.im/python-trio/general">聊天室</a> 闲逛并帮助有问题的人。</p></li>
<li><p>注册我们的 <a class="reference external" href="https://trio.discourse.group">论坛</a>，设置通知以便关注有趣的对话并参与其中。</p></li>
<li><p>在 StackOverflow 上回答问题（ <a class="reference external" href="https://stackexchange.com/filters/289914/trio-project-tags-on-stackoverflow-filter">最近的问题</a>）。</p></li>
<li><p>在项目中使用 Trio，并向我们反馈哪些地方有效，哪些地方无效。</p></li>
<li><p>写一篇关于你使用 Trio 的经历的博客文章，无论是好是坏。</p></li>
<li><p>发布使用 Trio 的开源程序和库。</p></li>
<li><p>改进文档。</p></li>
<li><p>评论问题。</p></li>
<li><p>添加测试。</p></li>
<li><p>修复 bug。</p></li>
<li><p>增加新特性。</p></li>
</ul>
<p>我们希望贡献过程既愉快又互利；本文档旨在为你提供一些有用的建议，帮助实现这一目标，适用于 <a class="reference external" href="https://github.com/python-trio">python-trio GitHub 组织下的所有项目</a>。如果你有任何改进意见，请告诉我们。</p>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"/><label class="tab-label" for="tab-set--0-input--2">英文</label><div class="tab-content docutils container">
<p>So you're interested in contributing to Trio or <a class="reference external" href="https://github.com/python-trio">one of our associated
projects</a>? That's awesome! Trio is
an open-source project maintained by an informal group of
volunteers. Our goal is to make async I/O in Python more fun, easy,
and reliable, and we can't do it without help from people like you. We
welcome contributions from anyone willing to work in good faith with
other contributors and the community (see also our
<a class="reference internal" href="code-of-conduct.html#code-of-conduct"><span class="std std-ref">行为守则</span></a>).</p>
<p>There are many ways to contribute, no contribution is too small, and
all contributions are valued.  For example, you could:</p>
<ul class="simple">
<li><p>Hang out in our <a class="reference external" href="https://gitter.im/python-trio/general">chatroom</a> and help people with questions.</p></li>
<li><p>Sign up for our <a class="reference external" href="https://trio.discourse.group">forum</a>, set up your notifications so you notice interesting conversations, and join in.</p></li>
<li><p>Answer questions on StackOverflow (<a class="reference external" href="https://stackexchange.com/filters/289914/trio-project-tags-on-stackoverflow-filter">recent questions</a>).</p></li>
<li><p>Use Trio in a project, and give us feedback on what worked and what
didn't.</p></li>
<li><p>Write a blog post about your experiences with Trio, good or bad.</p></li>
<li><p>Release open-source programs and libraries that use Trio.</p></li>
<li><p>Improve documentation.</p></li>
<li><p>Comment on issues.</p></li>
<li><p>Add tests.</p></li>
<li><p>Fix bugs.</p></li>
<li><p>Add features.</p></li>
</ul>
<p>We want contributing to be enjoyable and mutually beneficial; this
document tries to give you some tips to help that happen, and applies
to all of the projects under the <a class="reference external" href="https://github.com/python-trio">python-trio organization on Github</a>. If you have thoughts on how it
can be improved then please let us know.</p>
</div>
</div>
<section id="id1">
<h2>入门<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<p>Getting started</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"/><label class="tab-label" for="tab-set--1-input--1">中文</label><div class="tab-content docutils container">
<p>如果你对开源不太熟悉，可能会发现 <a class="reference external" href="https://opensource.guide/how-to-contribute/">opensource.guide 的开源贡献教程</a> 很有帮助，或者如果你更喜欢看视频的话， <a class="reference external" href="https://egghead.io/courses/how-to-contribute-to-an-open-source-project-on-github">egghead.io 提供了一个免费的短视频课程</a> 。</p>
<p>Trio 和相关项目是在 GitHub 上开发的，属于 <a class="reference external" href="https://github.com/python-trio">python-trio</a> 组织。代码和文档的修改是通过拉取请求（pull requests）进行的（见下文的 <a class="reference internal" href="#preparing-pull-requests"><span class="std std-ref">准备拉取请求</span></a>）。</p>
<p>我们还采取了一项不太寻常的策略来管理提交权限：任何其拉取请求被合并的人，都会自动被邀请加入 GitHub 组织，并获得我们所有仓库的提交权限。更多详情见下文 <a class="reference internal" href="#joining-the-team"><span class="std std-ref">加入团队</span></a>。</p>
<p>如果你想找个好地方开始，可以看看我们标记为 <a class="reference external" href="https://github.com/search?utf8=%E2%9C%93&amp;q=user%3Apython-trio+label%3A%22good+first+issue%22+state%3Aopen&amp;type=Issues&amp;ref=advsearch&amp;l=&amp;l=">good first issue</a> 的问题，或者随时在 <a class="reference external" href="https://trio.discourse.group">论坛</a> 或 <a class="reference external" href="https://gitter.im/python-trio/general">聊天室</a> 中提问。</p>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"/><label class="tab-label" for="tab-set--1-input--2">英文</label><div class="tab-content docutils container">
<p>If you're new to open source in general, you might find it useful to check out <a class="reference external" href="https://opensource.guide/how-to-contribute/">opensource.guide's How to Contribute to Open Source tutorial</a>, or if video's more your thing, <a class="reference external" href="https://egghead.io/courses/how-to-contribute-to-an-open-source-project-on-github">egghead.io has a short free video course</a>.</p>
<p>Trio and associated projects are developed on GitHub, under the <a class="reference external" href="https://github.com/python-trio">python-trio</a> organization. Code and documentation changes are made through pull requests (see <a class="reference internal" href="#preparing-pull-requests"><span class="std std-ref">准备拉取请求</span></a> below).</p>
<p>We also have an unusual policy for managing commit rights: anyone whose pull request is merged is automatically invited to join the GitHub organization, and gets commit rights to all of our repositories. See <a class="reference internal" href="#joining-the-team"><span class="std std-ref">加入团队</span></a> below for more details.</p>
<p>If you're looking for a good place to start, then check out our issues labeled <a class="reference external" href="https://github.com/search?utf8=%E2%9C%93&amp;q=user%3Apython-trio+label%3A%22good+first+issue%22+state%3Aopen&amp;type=Issues&amp;ref=advsearch&amp;l=&amp;l=">good first issue</a>, or feel free to ask <a class="reference external" href="https://trio.discourse.group">on the forum</a> or <a class="reference external" href="https://gitter.im/python-trio/general">in chat</a>.</p>
</div>
</div>
</section>
<section id="id2">
<h2>提供支持<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<p>Providing support</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--2-input--1" name="tab-set--2" type="radio"/><label class="tab-label" for="tab-set--2-input--1">中文</label><div class="tab-content docutils container">
<p>在帮助他人使用 Trio 时，请记住你是在代表我们的社区，我们希望这是一个友好和欢迎的地方。</p>
<p>并发编程对于初学者来说 <em>真的很困惑</em> 。与初学者交流时，记住你曾经也是初学者，我们的目标是创建一个顶级的并发库，既易于访问，又能带来愉悦的使用体验。如果有人带着初学者的问题出现，<em>这意味着我们在成功</em>。我们如何回应问题是开发者体验的一部分，就像我们的 API、文档或测试工具一样。而且，作为额外的收获，帮助初学者通常是发现改进想法的最佳方式。如果你开始感到精疲力尽或心情暴躁，我们每个人都曾经历过，休息一下直到你感觉好些是完全可以的。但不可以把情绪发泄到随机用户身上。</p>
<p>请记住，竞争项目的作者和用户都是聪明、深思熟虑的人，他们在尽力平衡复杂且相互冲突的需求，就像我们一样。当然，针对具体技术问题进行批评是完全可以的（“在项目 X 中，这是通过做 Y 来处理的，Trio 使用 Z，我更喜欢这样，因为……”）或者谈谈你的个人经历（“我尝试使用 X，但我变得非常沮丧和困惑”），但请避免做出泛泛的评论，如“X 很糟糕”或“我真不敢相信有人会用 X”。</p>
<p>请尽量不要对他人的性别做出假设，特别要记住我们并非都是男性。如果你没有特定的理由假设其他性别，那么 <a class="reference external" href="https://en.wikipedia.org/wiki/Third-person_pronoun#Singular_they">singular they</a> 是一个很好的代词，还有许多性别中立的集体词： "Hey folks", "Hi all", ...</p>
<p>我们还喜欢 Recurse Center 的 <a class="reference external" href="https://www.recurse.com/manual#sub-sec-social-rules">社交规则</a>：</p>
<ul class="simple">
<li><p>不装作惊讶（也可以通过 <a class="reference external" href="https://jvns.ca/blog/2017/04/27/no-feigning-surprise/">甜美漫画版本</a> 查看）</p></li>
<li><p>不要说“其实是……”</p></li>
<li><p>不做微妙的歧视主义（ <a class="reference external" href="https://www.recurse.com/blog/38-subtle-isms-at-hacker-school">更多细节</a>）</p></li>
</ul>
</div>
<input class="tab-input" id="tab-set--2-input--2" name="tab-set--2" type="radio"/><label class="tab-label" for="tab-set--2-input--2">英文</label><div class="tab-content docutils container">
<p>When helping others use Trio, please remember that you are
representing our community, and we want this to be a friendly and
welcoming place.</p>
<p>Concurrency is <em>really confusing</em> when you're first learning. When
talking to beginners, remember that you were a beginner once too, and
the whole goal here is to make a top-tier concurrency library that's
accessible to everyone and a joy to use. If people are showing up with
beginner questions, <em>that means we're succeeding</em>. How we respond to
questions is part of that developer experience, just as much as our
API, documentation, or testing tools. And as a bonus, helping
beginners is often the best way to discover ideas for improvements. If
you start getting burned out and cranky, we've all been there, and
it's OK to take a break until you feel better. But it's not OK to take
that out on random users.</p>
<p>Please remember that the authors and users of competing projects are
smart, thoughtful people doing their best to balance complicated and
conflicting requirements, just like us. Of course it's totally fine to
make specific technical critiques ("In project X, this is handled by
doing Y, Trio does Z instead, which I prefer because...") or talk
about your personal experience ("I tried using X but I got super
frustrated and confused"), but refrain from generic statements like "X
sucks" or "I can't believe anyone uses X".</p>
<p>Please try not to make assumptions about people's gender, and in
particular remember that we're not all dudes. If you don't have a
specific reason to assume otherwise, then <a class="reference external" href="https://en.wikipedia.org/wiki/Third-person_pronoun#Singular_they">singular they</a>
makes a fine pronoun, and there are plenty of gender-neutral
collective terms: "Hey folks", "Hi all", ...</p>
<p>We also like the Recurse Center's <a class="reference external" href="https://www.recurse.com/manual#sub-sec-social-rules">social rules</a>:</p>
<ul class="simple">
<li><p>no feigning surprise (also available in a <a class="reference external" href="https://jvns.ca/blog/2017/04/27/no-feigning-surprise/">sweet comic version</a>)</p></li>
<li><p>no well-actually's</p></li>
<li><p>no subtle -isms (<a class="reference external" href="https://www.recurse.com/blog/38-subtle-isms-at-hacker-school">more details</a>)</p></li>
</ul>
</div>
</div>
</section>
<section id="preparing-pull-requests">
<span id="id3"></span><h2>准备拉取请求<a class="headerlink" href="#preparing-pull-requests" title="Link to this heading">¶</a></h2>
<p>Preparing pull requests</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--3-input--1" name="tab-set--3" type="radio"/><label class="tab-label" for="tab-set--3-input--1">中文</label><div class="tab-content docutils container">
<p>如果你想提交文档或代码更改到 Trio 项目，那么你需要准备一个 GitHub 拉取请求（简称“PR”）。我们会尽最大努力快速审查你的 PR。如果过了一两周你还没有收到回应，可以随时发表评论提醒我们。（这只需要评论一个“ping”字眼，完全不算无礼。）</p>
<p>以下是整理一个好 PR 的快速检查清单，详细信息请见下文的各个部分：</p>
<ul class="simple">
<li><p><a class="reference internal" href="#pull-request-scope"><span class="std std-ref">在 PR 中要放什么</span></a>：你的 PR 是否解决了一个单一的、自包含的问题？</p></li>
<li><p><a class="reference internal" href="#pull-request-tests"><span class="std std-ref">测试</span></a>：你的测试是否通过？你是否添加了必要的测试？代码更改几乎总是需要相应的测试更改，因为如果代码值得修复，那么就值得添加一个测试，确保修复保持有效。</p></li>
<li><p><a class="reference internal" href="#pull-request-formatting"><span class="std std-ref">代码格式</span></a>：如果你更改了 Python 代码，你是否运行了 <code class="docutils literal notranslate"><span class="pre">black</span> <span class="pre">trio</span></code>？（对于其他包，将 <code class="docutils literal notranslate"><span class="pre">trio</span></code> 替换为包名。）</p></li>
<li><p><a class="reference internal" href="#pull-request-release-notes"><span class="std std-ref">发布说明</span></a>：如果你的更改影响了用户可见的功能，你是否在 <code class="docutils literal notranslate"><span class="pre">newsfragments/</span></code> 目录下添加了发布说明？</p></li>
<li><p><a class="reference internal" href="#pull-request-docs"><span class="std std-ref">文档</span></a>：你是否进行了必要的文档更新？</p></li>
<li><p>许可：通过提交 PR 到 Trio 项目，你将你的更改提供给该项目的许可证。对于大多数项目，这是双重 MIT/Apache 2 许可，除了 cookiecutter-trio，它使用 CC0 许可。</p></li>
</ul>
</div>
<input class="tab-input" id="tab-set--3-input--2" name="tab-set--3" type="radio"/><label class="tab-label" for="tab-set--3-input--2">英文</label><div class="tab-content docutils container">
<p>If you want to submit a documentation or code change to one of the
Trio projects, then that's done by preparing a Github pull request (or
"PR" for short). We'll do our best to review your PR quickly. If it's
been a week or two and you're still waiting for a response, feel free
to post a comment poking us. (This can just be a comment with the
single word "ping"; it's not rude at all.)</p>
<p>Here's a quick checklist for putting together a good PR, with details
in separate sections below:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#pull-request-scope"><span class="std std-ref">在 PR 中要放什么</span></a>: Does your PR address a single, self-contained issue?</p></li>
<li><p><a class="reference internal" href="#pull-request-tests"><span class="std std-ref">测试</span></a>: Are your tests passing? Did you add any necessary tests? Code changes pretty much always require test changes, because if it's worth fixing the code then it's worth adding a test to make sure it stays fixed.</p></li>
<li><p><a class="reference internal" href="#pull-request-formatting"><span class="std std-ref">代码格式</span></a>: If you changed Python code, then did you run <code class="docutils literal notranslate"><span class="pre">black</span> <span class="pre">trio</span></code>? (Or for other packages, replace <code class="docutils literal notranslate"><span class="pre">trio</span></code> with the package name.)</p></li>
<li><p><a class="reference internal" href="#pull-request-release-notes"><span class="std std-ref">发布说明</span></a>: If your change affects user-visible functionality, then did you add a release note to the <code class="docutils literal notranslate"><span class="pre">newsfragments/</span></code> directory?</p></li>
<li><p><a class="reference internal" href="#pull-request-docs"><span class="std std-ref">文档</span></a>: Did you make any necessary documentation updates?</p></li>
<li><p>License: by submitting a PR to a Trio project, you're offering your changes under that project's license. For most projects, that's dual MIT/Apache 2, except for cookiecutter-trio, which is CC0.</p></li>
</ul>
</div>
</div>
<section id="pr">
<span id="pull-request-scope"></span><h3>在 PR 中要放什么<a class="headerlink" href="#pr" title="Link to this heading">¶</a></h3>
<p>What to put in a PR</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--4-input--1" name="tab-set--4" type="radio"/><label class="tab-label" for="tab-set--4-input--1">中文</label><div class="tab-content docutils container">
<p>每个 PR 应尽可能只解决一个问题并且是自包含的。如果你有十个小的、不相关的更改，那么请提交十个 PR —— 审查十个小更改比审查一个包含所有更改的大 PR 更容易，而且这样做如果某个更改存在问题，也不会拖延其他更改的进度。</p>
<p>如果你不确定某个更改是否是一个好主意，并且在投入时间之前想要一些反馈，可以随时在 issue 或聊天室中询问。如果你有部分更改想要获得反馈，可以提交为 PR。（在这种情况下，传统上 PR 的标题会以 <code class="docutils literal notranslate"><span class="pre">[WIP]</span></code> 开头，表示“进行中的工作”。）</p>
<p>当你提交 PR 时，可以在提交信息或 PR 描述中包含 <code class="docutils literal notranslate"><span class="pre">Closes</span> <span class="pre">#123</span></code>、 <code class="docutils literal notranslate"><span class="pre">Fixes:</span> <span class="pre">#123</span></code> 或
<a class="reference external" href="https://help.github.com/en/articles/closing-issues-using-keywords">某种变体</a>，
这样当 PR 被合并时，会自动关闭引用的 issue。
这有助于保持我们所期望的状态，即每个开放的 issue 都反映了某项仍需完成的工作。</p>
</div>
<input class="tab-input" id="tab-set--4-input--2" name="tab-set--4" type="radio"/><label class="tab-label" for="tab-set--4-input--2">英文</label><div class="tab-content docutils container">
<p>Each PR should, as much as possible, address just one issue and be
self-contained. If you have ten small, unrelated changes, then go
ahead and submit ten PRs – it's much easier to review ten small
changes than one big change with them all mixed together, and this way
if there's some problem with one of the changes it won't hold up all
the others.</p>
<p>If you're uncertain about whether a change is a good idea and want
some feedback before putting time into it, feel free to ask in an
issue or in the chat room. If you have a partial change that you want
to get feedback on, feel free to submit it as a PR. (In this case it's
traditional to start the PR title with <code class="docutils literal notranslate"><span class="pre">[WIP]</span></code>, for "work in
progress".)</p>
<p>When you are submitting your PR, you can include <code class="docutils literal notranslate"><span class="pre">Closes</span> <span class="pre">#123</span></code>,
<code class="docutils literal notranslate"><span class="pre">Fixes:</span> <span class="pre">#123</span></code> or
<a class="reference external" href="https://help.github.com/en/articles/closing-issues-using-keywords">some variation</a>
in either your commit message or the PR description, in order to
automatically close the referenced issue when the PR is merged.
This keeps us closer to the desired state where each open issue reflects some
work that still needs to be done.</p>
</div>
</div>
</section>
<section id="id4">
<h3>环境<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<p>Environment</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--5-input--1" name="tab-set--5" type="radio"/><label class="tab-label" for="tab-set--5-input--1">中文</label><div class="tab-content docutils container">
<p>我们强烈建议使用虚拟环境来管理依赖项，例如使用 <a class="reference external" href="https://docs.python.org/3/library/venv.html">venv</a>。因此，要设置你的环境并安装依赖项，你应该运行类似如下的命令：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>path/to/trio/checkout/
python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>.venv<span class="w"> </span><span class="c1"># 在 .venv 中创建虚拟环境</span>
<span class="nb">source</span><span class="w"> </span>.venv/bin/activate<span class="w"> </span><span class="c1"># 激活虚拟环境</span>
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.<span class="w"> </span><span class="c1"># 安装 trio，pytest 插件所需</span>
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>test-requirements.txt<span class="w"> </span><span class="c1"># 安装测试依赖</span>
</pre></div>
</div>
<p>你不需要经常重建虚拟环境，但在未来的终端中需要重新激活它。如果 <cite>test-requirements.txt</cite> 中的版本更新了，你可能还需要重新从该文件中安装依赖。</p>
</div>
<input class="tab-input" id="tab-set--5-input--2" name="tab-set--5" type="radio"/><label class="tab-label" for="tab-set--5-input--2">英文</label><div class="tab-content docutils container">
<p>We strongly suggest using a virtual environment for managing dependencies,
for example with <a class="reference external" href="https://docs.python.org/3/library/venv.html">venv</a>. So to
set up your environment and install dependencies, you should run something like:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>path/to/trio/checkout/
python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>.venv<span class="w"> </span><span class="c1"># create virtual env in .venv</span>
<span class="nb">source</span><span class="w"> </span>.venv/bin/activate<span class="w"> </span><span class="c1"># activate it</span>
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.<span class="w"> </span><span class="c1"># install trio, needed for pytest plugin</span>
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>test-requirements.txt<span class="w"> </span><span class="c1"># install test requirements</span>
</pre></div>
</div>
<p>you rarely need to recreate the virtual environment, but you need to re-activate it
in future terminals. You might also need to re-install from test-requirements.txt if
the versions in it get updated.</p>
</div>
</div>
</section>
<section id="pull-request-tests">
<span id="id5"></span><h3>测试<a class="headerlink" href="#pull-request-tests" title="Link to this heading">¶</a></h3>
<p>Tests</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--6-input--1" name="tab-set--6" type="radio"/><label class="tab-label" for="tab-set--6-input--1">中文</label><div class="tab-content docutils container">
<p>我们使用 <a class="reference external" href="https://pytest.org/">pytest</a> 进行测试。要在本地运行测试，你应该执行以下命令：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>.venv/bin/activate<span class="w"> </span><span class="c1"># 如果尚未激活虚拟环境</span>
pytest<span class="w"> </span>src
</pre></div>
</div>
<p>这并不会尝试进行全面的测试——它仅仅检查代码在你机器上是否能正常工作，并且会跳过一些耗时较长的测试。但它是一个快速检查代码是否正常的好方法，当你提交 PR 后，我们会自动运行完整的测试套件，所以你有机会看到并修复任何剩余的问题。</p>
<p>每个更改应该确保 100% 的代码和测试覆盖率。不过，你可以使用 <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">pragma:</span> <span class="pre">no</span> <span class="pre">cover</span></code> 来标记那些没有覆盖的行，且我们并不希望修复的部分（而不是因为难以修复）。例如：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="o">...</span><span class="p">:</span>
    <span class="o">...</span>
<span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
    <span class="k">raise</span> <a class="sphinx-codeautolink-a" href="https://docs.python.org/zh-cn/3/library/exceptions.html#AssertionError" title="AssertionError"><span class="ne">AssertionError</span></a><span class="p">(</span><span class="s2">"这不可能发生！"</span><span class="p">)</span>
</pre></div>
</div>
<p>我们使用 Codecov 来跟踪覆盖率，因为它能方便地合并不同配置下的覆盖率数据。在本地运行覆盖率测试可能会很有用：</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>coverage<span class="w"> </span>run<span class="w"> </span>-m<span class="w"> </span>pytest
coverage<span class="w"> </span>combine
coverage<span class="w"> </span>report
</pre></div>
</div>
<p>但如果你看到的覆盖率比 Codecov 报告中低一些，不要惊讶，因为有些代码行可能只会在 Windows、macOS、PyPy 或 CPython 上执行，或者……你明白的。提交 PR 后，Codecov 会自动报告覆盖率，因此你可以检查自己实际的覆盖情况。（但请注意，直到所有测试通过之前，结果可能不准确。如果测试失败，请先修复，再关注覆盖率。）</p>
<p>编写良好测试的一些规则：</p>
<ul>
<li><p><a class="reference external" href="https://github.com/python-trio/trio/issues/200">测试必须是确定性的</a>。不稳定的测试会让开发者感到痛苦。一个常见的不确定性来源是调度器顺序；如果你在这方面遇到问题，<a class="reference internal" href="reference-testing.html#module-trio.testing" title="trio.testing"><code class="xref py py-mod docutils literal notranslate"><span class="pre">trio.testing</span></code></a> 提供了强大的工具来帮助控制顺序，比如 <a class="reference internal" href="reference-testing.html#trio.testing.wait_all_tasks_blocked" title="trio.testing.wait_all_tasks_blocked"><code class="xref py py-func docutils literal notranslate"><span class="pre">trio.testing.wait_all_tasks_blocked()</span></code></a>、<a class="reference internal" href="reference-testing.html#trio.testing.Sequencer" title="trio.testing.Sequencer"><code class="xref py py-class docutils literal notranslate"><span class="pre">trio.testing.Sequencer</span></code></a> 和 <a class="reference internal" href="reference-testing.html#trio.testing.MockClock" title="trio.testing.MockClock"><code class="xref py py-class docutils literal notranslate"><span class="pre">trio.testing.MockClock</span></code></a> （通常作为一个 fixture 使用：<code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">test_whatever(autojump_clock):</span> <span class="pre">...</span></code>）。如果你需要更多的工具，我们应该添加它们。</p></li>
<li><p>（仅限 Trio 包）慢速测试——任何耗时超过大约 0.25 秒的测试——应该使用 <code class="docutils literal notranslate"><span class="pre">@slow</span></code> 标记。这样它们只有在你运行 <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">trio</span> <span class="pre">--run-slow</span></code> 时才会执行。我们的 CI 脚本会运行慢速测试，因此你可以确保代码仍然会得到充分测试，这样你就不必在本地迭代更改时浪费时间等待一些不相关的慢速测试。</p>
<p>你可以通过向 pytest 传递 <code class="docutils literal notranslate"><span class="pre">--durations=10</span></code> 来检查慢速测试。大多数测试应该在 0.01 秒内完成。</p>
</li>
<li><p>说到等待测试：除非 <em>绝对必要</em>，测试中永远不应使用 sleep。然而，在使用 <code class="docutils literal notranslate"><span class="pre">autojump_clock</span></code> 时调用 <a class="reference internal" href="ref-core/time_clock.html#trio.sleep" title="trio.sleep"><code class="xref py py-func docutils literal notranslate"><span class="pre">trio.sleep()</span></code></a> 是可以的，因为这实际上并不是在休眠，并不会浪费开发者的时间等待测试完成。</p></li>
<li><p>我们希望测试能够验证实际的功能。例如，如果你正在添加子进程启动功能，那么你的测试应该至少启动一个进程！有时这可能有些棘手——例如，Trio 的 <a class="reference external" href="https://docs.python.org/zh-cn/3/library/exceptions.html#KeyboardInterrupt" title="（在 Python v3.13）"><code class="xref py py-class docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code></a> 测试必须通过一些技巧来在正确的时机生成真实的 SIGINT 信号，以覆盖不同的代码路径。但几乎总是值得这样做的。</p></li>
<li><p>对于那些实际测试不相关或不充分的情况，我们强烈推荐使用伪造或存根（fakes or stubs），而非 mocks。以下是一些有用的文章：</p>
<ul class="simple">
<li><p><a class="reference external" href="https://dev.to/milipski/test-doubles---fakes-mocks-and-stubs">Test Doubles - Fakes, Mocks and Stubs</a></p></li>
<li><p><a class="reference external" href="https://martinfowler.com/articles/mocksArentStubs.html">Mocks aren't stubs</a></p></li>
<li><p><a class="reference external" href="https://codewithoutrules.com/2016/07/31/verified-fakes/">Write test doubles you can trust using verified fakes</a></p></li>
</ul>
<p>大多数主要功能都有真实测试和使用伪造或存根的测试。例如，<a class="reference internal" href="ref-io/abs_api.html#trio.SSLStream" title="trio.SSLStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSLStream</span></code></a> 有一些测试，使用 Trio 实际与 SSL 服务器建立连接，这是一个使用阻塞 I/O 实现的真实连接，因为如果这个不起作用就很尴尬。然后，还有一些使用内存中的伪造传输流的测试，我们可以完全控制时序，确保所有微妙的边界情况都能正确处理。</p>
</li>
</ul>
<p>编写可靠的测试来验证一些不常见的边缘情况通常比实现一个功能还要困难，但坚持下去：这是值得的！如果你需要帮助，别害怕请求帮助。有时候，换一个新视角能帮助你想出一些巧妙的解决方案。</p>
</div>
<input class="tab-input" id="tab-set--6-input--2" name="tab-set--6" type="radio"/><label class="tab-label" for="tab-set--6-input--2">英文</label><div class="tab-content docutils container">
<p>We use <a class="reference external" href="https://pytest.org/">pytest</a> for testing. To run the tests
locally, you should run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>.venv/bin/activate<span class="w"> </span><span class="c1"># if not already activated</span>
pytest<span class="w"> </span>src
</pre></div>
</div>
<p>This doesn't try to be completely exhaustive – it only checks that
things work on your machine, and it will skip some slow tests. But it's
a good way to quickly check that things seem to be working, and we'll
automatically run the full test suite when your PR is submitted, so
you'll have a chance to see and fix any remaining issues then.</p>
<p>Every change should have 100% coverage for both code and tests. But,
you can use <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">pragma:</span> <span class="pre">no</span> <span class="pre">cover</span></code> to mark lines where
lack-of-coverage isn't something that we'd want to fix (as opposed to
it being merely hard to fix). For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="o">...</span><span class="p">:</span>
    <span class="o">...</span>
<span class="k">else</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
    <span class="k">raise</span> <a class="sphinx-codeautolink-a" href="https://docs.python.org/zh-cn/3/library/exceptions.html#AssertionError" title="AssertionError"><span class="ne">AssertionError</span></a><span class="p">(</span><span class="s2">"this can't happen!"</span><span class="p">)</span>
</pre></div>
</div>
<p>We use Codecov to track coverage, because it makes it easy to combine
coverage from running in different configurations. Running coverage
locally can be useful</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>coverage<span class="w"> </span>run<span class="w"> </span>-m<span class="w"> </span>pytest
coverage<span class="w"> </span>combine
coverage<span class="w"> </span>report
</pre></div>
</div>
<p>but don't be surprised if you get lower coverage than when looking at Codecov
reports, because there are some lines that are only executed on
Windows, or macOS, or PyPy, or CPython, or... you get the idea. After
you create a PR, Codecov will automatically report back with the
coverage, so you can check how you're really doing. (But note that the
results can be inaccurate until all the tests are passing. If the
tests failed, then fix that before worrying about coverage.)</p>
<p>Some rules for writing good tests:</p>
<ul>
<li><p><a class="reference external" href="https://github.com/python-trio/trio/issues/200">Tests MUST pass deterministically</a>. Flakey tests make for miserable developers. One common source of indeterminism is scheduler ordering; if you're having trouble with this, then <a class="reference internal" href="reference-testing.html#module-trio.testing" title="trio.testing"><code class="xref py py-mod docutils literal notranslate"><span class="pre">trio.testing</span></code></a> provides powerful tools to help control ordering, like <a class="reference internal" href="reference-testing.html#trio.testing.wait_all_tasks_blocked" title="trio.testing.wait_all_tasks_blocked"><code class="xref py py-func docutils literal notranslate"><span class="pre">trio.testing.wait_all_tasks_blocked()</span></code></a>, <a class="reference internal" href="reference-testing.html#trio.testing.Sequencer" title="trio.testing.Sequencer"><code class="xref py py-class docutils literal notranslate"><span class="pre">trio.testing.Sequencer</span></code></a>, and <a class="reference internal" href="reference-testing.html#trio.testing.MockClock" title="trio.testing.MockClock"><code class="xref py py-class docutils literal notranslate"><span class="pre">trio.testing.MockClock</span></code></a> (usually used as a fixture: <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">def</span> <span class="pre">test_whatever(autojump_clock):</span> <span class="pre">...</span></code>). And if you need more tools than this then we should add them.</p></li>
<li><p>(Trio package only) Slow tests – anything that takes more than about 0.25 seconds – should be marked with <code class="docutils literal notranslate"><span class="pre">@slow</span></code>. This makes it so they only run if you do <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">trio</span> <span class="pre">--run-slow</span></code>. Our CI scripts do run slow tests, so you can be sure that the code will still be thoroughly tested, and this way you don't have to sit around waiting for a few irrelevant multi-second tests to run while you're iterating on a change locally.</p>
<p>You can check for slow tests by passing <code class="docutils literal notranslate"><span class="pre">--durations=10</span></code> to pytest. Most tests should take 0.01 seconds or less.</p>
</li>
<li><p>Speaking of waiting around for tests: Tests should never sleep unless <em>absolutely</em> necessary. However, calling <a class="reference internal" href="ref-core/time_clock.html#trio.sleep" title="trio.sleep"><code class="xref py py-func docutils literal notranslate"><span class="pre">trio.sleep()</span></code></a> when using <code class="docutils literal notranslate"><span class="pre">autojump_clock</span></code> is fine, because that's not really sleeping, and doesn't waste developers time waiting for the test to run.</p></li>
<li><p>We like tests to exercise real functionality. For example, if you're adding subprocess spawning functionality, then your tests should spawn at least one process! Sometimes this is tricky – for example, Trio's <a class="reference external" href="https://docs.python.org/zh-cn/3/library/exceptions.html#KeyboardInterrupt" title="（在 Python v3.13）"><code class="xref py py-class docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code></a> tests have to jump through quite some hoops to generate real SIGINT signals at the right times to exercise different paths. But it's almost always worth it.</p></li>
<li><p>For cases where real testing isn't relevant or sufficient, then we strongly prefer fakes or stubs over mocks. Useful articles:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://dev.to/milipski/test-doubles---fakes-mocks-and-stubs">Test Doubles - Fakes, Mocks and Stubs</a></p></li>
<li><p><a class="reference external" href="https://martinfowler.com/articles/mocksArentStubs.html">Mocks aren't stubs</a></p></li>
<li><p><a class="reference external" href="https://codewithoutrules.com/2016/07/31/verified-fakes/">Write test doubles you can trust using verified fakes</a></p></li>
</ul>
<p>Most major features have both real tests and tests using fakes or stubs. For example, <a class="reference internal" href="ref-io/abs_api.html#trio.SSLStream" title="trio.SSLStream"><code class="xref py py-class docutils literal notranslate"><span class="pre">SSLStream</span></code></a> has some tests that use Trio to make a real socket connection to real SSL server implemented using blocking I/O, because it sure would be embarrassing if that didn't work. And then there are also a bunch of tests that use a fake in-memory transport stream where we have complete control over timing and can make sure all the subtle edge cases work correctly.</p>
</li>
</ul>
<p>Writing reliable tests for obscure corner cases is often harder than implementing a feature in the first place, but stick with it: it's worth it! And don't be afraid to ask for help. Sometimes a fresh pair of eyes can be helpful when trying to come up with devious tricks.</p>
</div>
</div>
</section>
<section id="pull-request-formatting">
<span id="id6"></span><h3>代码格式<a class="headerlink" href="#pull-request-formatting" title="Link to this heading">¶</a></h3>
<p>Code formatting</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--7-input--1" name="tab-set--7" type="radio"/><label class="tab-label" for="tab-set--7-input--1">中文</label><div class="tab-content docutils container">
<p>为了避免浪费时间争论代码格式问题，我们使用 <a class="reference external" href="https://github.com/psf/black">black</a> 以及其他工具来自动将所有代码格式化为标准样式。在编辑代码时，你可以随意处理空白字符；然后在提交之前，只需运行：</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pre</span><span class="o">-</span><span class="n">commit</span>
<span class="n">pre</span><span class="o">-</span><span class="n">commit</span>
</pre></div>
</div>
<p>来自动修复格式问题。（如果忘记了也没关系——当你提交 pull request 时，我们会自动检查并提醒你。）希望这能让你专注于更重要的样式问题，比如选择合适的命名、编写有用的注释，以及确保你的 docstring 格式正确。（black 不会重新格式化注释或 docstring。）</p>
<p>如果你愿意，你甚至可以在提交前让 pre-commit 自动运行，只需运行：</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">pre</span><span class="o">-</span><span class="n">commit</span> <span class="n">install</span>
</pre></div>
</div>
<p>这样，在 git 提交之前，pre-commit 就会自动运行。你随时可以通过运行以下命令卸载 pre-commit 钩子：</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">pre</span><span class="o">-</span><span class="n">commit</span> <span class="n">uninstall</span>
</pre></div>
</div>
<p>偶尔，你可能需要覆盖 black 格式化。为此，你可以在代码中添加 <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">off</span></code> 和 <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">on</span></code> 注释。</p>
<p>如果你想查看 black 会做出哪些更改，可以使用：</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">black</span> <span class="o">--</span><span class="n">diff</span> <span class="n">trio</span>
</pre></div>
</div>
<p>（<code class="docutils literal notranslate"><span class="pre">--diff</span></code> 会显示差异，而默认模式则是直接修复文件。）</p>
<p>此外，在某些情况下，你可能需要禁用 isort 更改导入顺序。为此，你可以添加 <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">isort:</span> <span class="pre">split</span></code> 注释。更多信息，请参见 <a class="reference external" href="https://pycqa.github.io/isort/docs/configuration/action_comments.html">isort 的文档</a>。</p>
</div>
<input class="tab-input" id="tab-set--7-input--2" name="tab-set--7" type="radio"/><label class="tab-label" for="tab-set--7-input--2">英文</label><div class="tab-content docutils container">
<p>Instead of wasting time arguing about code formatting, we use <a class="reference external" href="https://github.com/psf/black">black</a> as well as other tools to automatically
format all our code to a standard style. While you're editing code you
can be as sloppy as you like about whitespace; and then before you commit,
just run:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">pre</span><span class="o">-</span><span class="n">commit</span>
<span class="n">pre</span><span class="o">-</span><span class="n">commit</span>
</pre></div>
</div>
<p>to fix it up. (And don't worry if you forget – when you submit a pull
request then we'll automatically check and remind you.) Hopefully this
will let you focus on more important style issues like choosing good
names, writing useful comments, and making sure your docstrings are
nicely formatted. (black doesn't reformat comments or docstrings.)</p>
<p>If you would like, you can even have pre-commit run before you commit by
running:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">pre</span><span class="o">-</span><span class="n">commit</span> <span class="n">install</span>
</pre></div>
</div>
<p>and now pre-commit will run before git commits. You can uninstall the
pre-commit hook at any time by running:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">pre</span><span class="o">-</span><span class="n">commit</span> <span class="n">uninstall</span>
</pre></div>
</div>
<p>Very occasionally, you'll want to override black formatting. To do so,
you can can add <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">off</span></code> and <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">fmt:</span> <span class="pre">on</span></code> comments.</p>
<p>If you want to see what changes black will make, you can use:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">black</span> <span class="o">--</span><span class="n">diff</span> <span class="n">trio</span>
</pre></div>
</div>
<p>(<code class="docutils literal notranslate"><span class="pre">--diff</span></code> displays a diff, versus the default mode which fixes files
in-place.)</p>
<p>Additionally, in some cases it is necessary to disable isort changing the
order of imports. To do so you can add <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">isort:</span> <span class="pre">split</span></code> comments.
For more information, please see <a class="reference external" href="https://pycqa.github.io/isort/docs/configuration/action_comments.html">isort's docs</a>.</p>
</div>
</div>
</section>
<section id="pull-request-release-notes">
<span id="id7"></span><h3>发布说明<a class="headerlink" href="#pull-request-release-notes" title="Link to this heading">¶</a></h3>
<p>Release notes</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--8-input--1" name="tab-set--8" type="radio"/><label class="tab-label" for="tab-set--8-input--1">中文</label><div class="tab-content docutils container">
<p>我们使用 <a class="reference external" href="https://github.com/hawkowl/towncrier">towncrier</a> 来管理我们的 <a class="reference external" href="https://trio.readthedocs.io/en/latest/history.html">发布说明</a>。
基本上，每个对用户可见的 pull request 都应该在 <code class="docutils literal notranslate"><span class="pre">newsfragments/</span></code> 目录中添加一个简短的文件，描述更改，文件名应类似于 <code class="docutils literal notranslate"><span class="pre">&lt;ISSUE</span> <span class="pre">NUMBER&gt;.&lt;TYPE&gt;.rst</span></code>。有关详细信息，请参阅 <a class="reference external" href="https://github.com/python-trio/trio/blob/main/newsfragments/README.rst">newsfragments/README.rst</a>。通过这种方式，我们可以在开发过程中保持一份良好的更改列表，这让发布经理很高兴，也意味着我们能更频繁地发布版本，从而使你的更改能更快地到达用户手中。</p>
</div>
<input class="tab-input" id="tab-set--8-input--2" name="tab-set--8" type="radio"/><label class="tab-label" for="tab-set--8-input--2">英文</label><div class="tab-content docutils container">
<p>We use <a class="reference external" href="https://github.com/hawkowl/towncrier">towncrier</a> to manage
our <a class="reference external" href="https://trio.readthedocs.io/en/latest/history.html">release notes</a>.
Basically, every pull request that has a user
visible effect should add a short file to the <code class="docutils literal notranslate"><span class="pre">newsfragments/</span></code>
directory describing the change, with a name like <code class="docutils literal notranslate"><span class="pre">&lt;ISSUE</span>
<span class="pre">NUMBER&gt;.&lt;TYPE&gt;.rst</span></code>. See <a class="reference external" href="https://github.com/python-trio/trio/blob/main/newsfragments/README.rst">newsfragments/README.rst</a>
for details. This way we can keep a good list of changes as we go,
which makes the release manager happy, which means we get more
frequent releases, which means your change gets into users' hands
faster.</p>
</div>
</div>
</section>
<section id="pull-request-commit-messages">
<span id="id8"></span><h3>提交消息<a class="headerlink" href="#pull-request-commit-messages" title="Link to this heading">¶</a></h3>
<p>Commit messages</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--9-input--1" name="tab-set--9" type="radio"/><label class="tab-label" for="tab-set--9-input--1">中文</label><div class="tab-content docutils container">
<p>我们不强制要求提交信息采用特定格式。在你的提交信息中，尽量提供上下文，以解释 <em>为什么</em> 做出某个更改。</p>
<p>发布说明的目标受众是用户，他们希望了解可能影响他们使用库的更改，或者在升级后想弄明白为什么发生了某些变化。</p>
<p>提交信息的目标受众是某个无助的开发者（想象一下：六个月后…或五年后的你），他们试图弄清楚为什么某些代码是这样写的。 <em>强烈</em> 建议在提交信息中包含指向问题的链接以及任何其他导致该提交的讨论。</p>
</div>
<input class="tab-input" id="tab-set--9-input--2" name="tab-set--9" type="radio"/><label class="tab-label" for="tab-set--9-input--2">英文</label><div class="tab-content docutils container">
<p>We don't enforce any particular format on commit messages. In your
commit messages, try to give the context to explain <em>why</em> a change was
made.</p>
<p>The target audience for release notes is users, who want to find out
about changes that might affect how they use the library, or who are
trying to figure out why something changed after they upgraded.</p>
<p>The target audience for commit messages is some hapless developer
(think: you in six months... or five years) who is trying to figure
out why some code looks the way it does. Including links to issues and
any other discussion that led up to the commit is <em>strongly</em>
recommended.</p>
</div>
</div>
</section>
<section id="pull-request-docs">
<span id="id9"></span><h3>文档<a class="headerlink" href="#pull-request-docs" title="Link to this heading">¶</a></h3>
<p>Documentation</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--10-input--1" name="tab-set--10" type="radio"/><label class="tab-label" for="tab-set--10-input--1">中文</label><div class="tab-content docutils container">
<p>我们以提供友好且全面的文档为荣。文档存储在 <code class="docutils literal notranslate"><span class="pre">docs/source/*.rst</span></code> 中，并使用 <a class="reference external" href="http://www.sphinx-doc.org/">Sphinx</a> 和 <a class="reference external" href="https://sphinxcontrib-trio.readthedocs.io/en/latest/">sphinxcontrib-trio</a> 扩展进行渲染。文档托管在 <a class="reference external" href="https://readthedocs.org/">Read the Docs</a> 上，并会在每次提交后自动重新构建。</p>
<p>对于文档字符串，我们使用 <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/example_google.html#example-google-style-python-docstrings">Google 文档字符串格式</a>。如果你添加了新的函数或类，文档不会自动更新：你至少需要在适当的位置添加一行 <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">autofunction::</span> <span class="pre">&lt;your</span> <span class="pre">function&gt;</span></code>。在许多情况下，最好还加入一些更长形式的叙述性文档。</p>
<p>我们启用了 Sphinx 的“nitpick 模式”，该模式会将悬挂的引用视为错误 – 这有助于捕获拼写错误。（当你提交 PR 时，系统会自动检查这一点。）如果你故意想允许悬挂的引用，可以将其添加到 <code class="docutils literal notranslate"><span class="pre">docs/source/conf.py</span></code> 中的 <a class="reference external" href="http://www.sphinx-doc.org/en/stable/config.html#confval-nitpick_ignore">nitpick_ignore</a> 白名单中。</p>
<p>要在本地构建文档，可以使用我们的 <code class="docutils literal notranslate"><span class="pre">docs-requirements.txt</span></code> 文件安装所有必需的包（可能需要使用虚拟环境）。安装后，可以在文档目录中使用 <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code> 构建文档。整个过程可能像这样：</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">checkout</span><span class="o">/</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">docs</span><span class="o">-</span><span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
<span class="n">cd</span> <span class="n">docs</span>
<span class="n">make</span> <span class="n">html</span>
</pre></div>
</div>
<p>然后，你可以使用 Python 内建的 HTTP 服务器浏览文档：
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">http.server</span> <span class="pre">8000</span> <span class="pre">--bind</span> <span class="pre">127.0.0.1</span> <span class="pre">--directory</span> <span class="pre">build/html</span></code>
并在浏览器中打开 <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:8000/</span></code>。</p>
</div>
<input class="tab-input" id="tab-set--10-input--2" name="tab-set--10" type="radio"/><label class="tab-label" for="tab-set--10-input--2">英文</label><div class="tab-content docutils container">
<p>We take pride in providing friendly and comprehensive documentation.
Documentation is stored in <code class="docutils literal notranslate"><span class="pre">docs/source/*.rst</span></code> and is rendered using
<a class="reference external" href="http://www.sphinx-doc.org/">Sphinx</a> with the <a class="reference external" href="https://sphinxcontrib-trio.readthedocs.io/en/latest/">sphinxcontrib-trio</a> extension.
Documentation is hosted at <a class="reference external" href="https://readthedocs.org/">Read the Docs</a>, who take care of automatically
rebuilding it after every commit.</p>
<p>For docstrings, we use <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/example_google.html#example-google-style-python-docstrings">the Google docstring format</a>.
If you add a new function or class, there's no mechanism for
automatically adding that to the docs: you'll have to at least add a
line like <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">autofunction::</span> <span class="pre">&lt;your</span> <span class="pre">function&gt;</span></code> in the appropriate
place. In many cases it's also nice to add some longer-form narrative
documentation around that.</p>
<p>We enable Sphinx's "nitpick mode", which turns dangling references
into an error – this helps catch typos. (This will be automatically
checked when your PR is submitted.) If you intentionally want to allow
a dangling reference, you can add it to the <a class="reference external" href="http://www.sphinx-doc.org/en/stable/config.html#confval-nitpick_ignore">nitpick_ignore</a>
whitelist in <code class="docutils literal notranslate"><span class="pre">docs/source/conf.py</span></code>.</p>
<p>To build the docs locally, use our handy <code class="docutils literal notranslate"><span class="pre">docs-requirements.txt</span></code>
file to install all of the required packages (possibly using a
virtualenv). After that, build the docs using <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code> in the
docs directory. The whole process might look something like this:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">checkout</span><span class="o">/</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">r</span> <span class="n">docs</span><span class="o">-</span><span class="n">requirements</span><span class="o">.</span><span class="n">txt</span>
<span class="n">cd</span> <span class="n">docs</span>
<span class="n">make</span> <span class="n">html</span>
</pre></div>
</div>
<p>You can then browse the docs using Python's builtin http server:
<code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">http.server</span> <span class="pre">8000</span> <span class="pre">--bind</span> <span class="pre">127.0.0.1</span> <span class="pre">--directory</span> <span class="pre">build/html</span></code>
and then opening <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:8000/</span></code> in your web browser.</p>
</div>
</div>
</section>
</section>
<section id="joining-the-team">
<span id="id10"></span><h2>加入团队<a class="headerlink" href="#joining-the-team" title="Link to this heading">¶</a></h2>
<p>Joining the team</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--11-input--1" name="tab-set--11" type="radio"/><label class="tab-label" for="tab-set--11-input--1">中文</label><div class="tab-content docutils container">
<p>在你的第一个 PR 合并后，你应该会收到一个加入 <code class="docutils literal notranslate"><span class="pre">python-trio</span></code> 组织的 Github 邀请。如果没有收到，问题不在你，是我们这边的失误。可以在聊天中提醒我们，或者 <a class="reference external" href="mailto:njs%40pobox.com">给 <span>@</span>njsmith 发送电子邮件</a>，我们会尽快修复。</p>
<p>是否接受邀请完全由你决定，如果你接受，欢迎你根据自己的意愿参与，多少都可以。我们发出邀请是因为我们希望你能加入我们，一起让 Python 并发变得更加友好和强大，但没有压力：人生太短暂，不能在自己不感兴趣的事情上浪费志愿时间。</p>
<p>在这个时候，人们通常会有一些问题。</p>
<p><strong>你怎么能信任我拥有这种权限？如果我搞砸了怎么办？！</strong></p>
<p>放松，你可以的！我们会支持你。记住，这只是软件，一切都有版本控制：最坏的情况就是我们回滚并集思广益，避免再次发生同样的问题。我们认为，欢迎新成员并帮助他们成长，比担心偶尔的小失误更为重要。</p>
<p><strong>我觉得我不配得到这个。</strong></p>
<p>决定权在你，但如果我们认为你不配，我们是不会邀请你的。</p>
<p><strong>如果我接受邀请，具体会发生什么？点击错了按钮就会把一切搞垮吗？</strong></p>
<p>具体来说，如果你接受邀请，将会有以下三个效果：</p>
<ul class="simple">
<li><p>你可以管理所有 <code class="docutils literal notranslate"><span class="pre">python-trio</span></code> 项目的问题（通过标记、关闭等方式）。</p></li>
<li><p>你可以在所有 <code class="docutils literal notranslate"><span class="pre">python-trio</span></code> 项目中合并 PR，只要所有测试都通过，就可以点击 Github 上的大绿色“合并”按钮。</p></li>
<li><p>它会自动让你订阅 <code class="docutils literal notranslate"><span class="pre">python-trio</span></code> 仓库的通知（但你也可以通过 Github 界面取消订阅）。</p></li>
</ul>
<p>需要注意的是，接受邀请并不会让你在没有提交 PR 的情况下直接推送更改，也不会让你合并未通过测试的 PR —— 这一点是通过 Github 的“分支保护”功能来强制执行的，这适用于从新贡献者到项目创始人的所有人。</p>
<p><strong>好的，这是我能做的，但是我应该做什么呢？</strong></p>
<p>简短的回答：做你感到舒适的事情。</p>
<p>我们确实有一条规则，这是大多数 F/OSS 项目使用的规则：不要合并自己的 PR。我们发现，由其他人审查每个 PR 会导致更好的质量。</p>
<p>除此之外，一切都取决于你自己。如果你觉得自己对复杂的代码更改了解不够，完全不必强迫自己去审查 —— 你可以先浏览一遍，做一些评论，即使你不打算做出最终的合并或不合并的决定。或者你可以只处理一些简单的文档修复和给问题添加标签，这也很有帮助。如果在参与一段时间后，你开始觉得自己对项目的运作有了更好的理解，并且想要做得更多，那太好了；如果没有，那也没关系。</p>
<p>如果在任何时候你不确定是否某个行为合适，可以随时提问。例如，完全可以接受在第一次审查 PR 时，你希望让其他人检查一下你的工作，然后再点击合并按钮。</p>
<p>我知道的关于审查 Pull Request 的最佳文章是 Sage Sharp 的 <a class="reference external" href="http://sage.thesharps.us/2014/09/01/the-gentle-art-of-patch-review/">The gentle art of patch review</a>。 <a class="reference external" href="https://github.com/nodejs/node/blob/master/doc/guides/contributing/pull-requests.md#reviewing-pull-requests">node.js 指南</a>
也有一些很好的建议， <a class="reference external" href="http://verraes.net/2013/10/pre-merge-code-reviews/">这篇博客文章</a> 也是如此。</p>
</div>
<input class="tab-input" id="tab-set--11-input--2" name="tab-set--11" type="radio"/><label class="tab-label" for="tab-set--11-input--2">英文</label><div class="tab-content docutils container">
<p>After your first PR is merged, you should receive a Github invitation
to join the <code class="docutils literal notranslate"><span class="pre">python-trio</span></code> organization. If you don't, that's not
your fault, it's because we made a mistake on our end. Give us a
nudge on chat or <a class="reference external" href="mailto:njs%40pobox.com">send <span>@</span>njsmith an email</a> and
we'll fix it.</p>
<p>It's totally up to you whether you accept or not, and if you do
accept, you're welcome to participate as much or as little as you
want. We're offering the invitation because we'd love for you to join
us in making Python concurrency more friendly and robust, but there's
no pressure: life is too short to spend volunteer time on things that
you don't find fulfilling.</p>
<p>At this point people tend to have questions.</p>
<p><strong>How can you trust me with this kind of power? What if I mess
everything up?!?</strong></p>
<p>Relax, you got this! And we've got your back. Remember, it's just
software, and everything's in version control: worst case we'll just
roll things back and brainstorm ways to avoid the issue happening
again. We think it's more important to welcome people and help them
grow than to worry about the occasional minor mishap.</p>
<p><strong>I don't think I really deserve this.</strong></p>
<p>It's up to you, but we wouldn't be offering if we didn't think
you did.</p>
<p><strong>What exactly happens if I accept? Does it mean I'll break everything
if I click the wrong button?</strong></p>
<p>Concretely, if you accept the invitation, this does three things:</p>
<ul class="simple">
<li><p>It lets you manage incoming issues on all of the <code class="docutils literal notranslate"><span class="pre">python-trio</span></code>
projects by labelling them, closing them, etc.</p></li>
<li><p>It lets you merge pull requests on all of the <code class="docutils literal notranslate"><span class="pre">python-trio</span></code>
projects by clicking Github's big green "Merge" button, but only if
all their tests have passed.</p></li>
<li><p>It automatically subscribes you to notifications on the
<code class="docutils literal notranslate"><span class="pre">python-trio</span></code> repositories (but you can unsubscribe again if you
want through the Github interface)</p></li>
</ul>
<p>Note that it does <em>not</em> allow you to push changes directly to Github
without submitting a PR, and it doesn't let you merge broken PRs –
this is enforced through Github's "branch protection" feature, and it
applies to everyone from the newest contributor up to the project
founder.</p>
<p><strong>Okay, that's what I CAN do, but what SHOULD I do?</strong></p>
<p>Short answer: whatever you feel comfortable with.</p>
<p>We do have one rule, which is the same one most F/OSS projects use:
don't merge your own PRs. We find that having another person look at
each PR leads to better quality.</p>
<p>Beyond that, it all comes down to what you feel up to. If you don't
feel like you know enough to review a complex code change, then you
don't have to – you can just look it over and make some comments, even
if you don't feel up to making the final merge/no-merge decision. Or
you can just stick to merging trivial doc fixes and adding tags to
issues, that's helpful too. If after hanging around for a while you
start to feel like you have better handle on how things work and want
to start doing more, that's excellent; if it doesn't happen, that's
fine too.</p>
<p>If at any point you're unsure about whether doing something would be
appropriate, feel free to ask. For example, it's <em>totally OK</em> if the
first time you review a PR, you want someone else to check over your
work before you hit the merge button.</p>
<p>The best essay I know about reviewing pull request's is Sage Sharp's
<a class="reference external" href="http://sage.thesharps.us/2014/09/01/the-gentle-art-of-patch-review/">The gentle art of patch review</a>.
The <a class="reference external" href="https://github.com/nodejs/node/blob/master/doc/guides/contributing/pull-requests.md#reviewing-pull-requests">node.js guide</a>
also has some good suggestions, and <a class="reference external" href="http://verraes.net/2013/10/pre-merge-code-reviews/">so does this blog post</a>.</p>
</div>
</div>
</section>
<section id="id11">
<h2>管理问题<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h2>
<p>Managing issues</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--12-input--1" name="tab-set--12" type="radio"/><label class="tab-label" for="tab-set--12-input--1">中文</label><div class="tab-content docutils container">
<p>随着问题的提出，它们需要得到响应、跟踪，并且 —— 希望如此！ —— 最终被关闭。</p>
<p>一般来说，每个未关闭的问题都应该代表我们需要完成的某项任务。有时，这个任务可能是“弄清楚该怎么做”，或者甚至是“弄清楚我们是否想解决这个问题”；有时可能是“回答这个人的问题”。但是，如果没有后续需要做的事情，那么这个问题就应该关闭。</p>
</div>
<input class="tab-input" id="tab-set--12-input--2" name="tab-set--12" type="radio"/><label class="tab-label" for="tab-set--12-input--2">英文</label><div class="tab-content docutils container">
<p>As issues come in, they need to be responded to, tracked, and –
hopefully! – eventually closed.</p>
<p>As a general rule, each open issue should represent some kind of task
that we need to do. Sometimes that task might be "figure out what to
do here", or even "figure out whether we want to address this issue";
sometimes it will be "answer this person's question". But if there's
no followup to be done, then the issue should be closed.</p>
</div>
</div>
<section id="id12">
<h3>问题标签<a class="headerlink" href="#id12" title="Link to this heading">¶</a></h3>
<p>Issue labels</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--13-input--1" name="tab-set--13" type="radio"/><label class="tab-label" for="tab-set--13-input--1">中文</label><div class="tab-content docutils container">
<p>Trio 仓库特别使用了一些标签来帮助跟踪问题。目前的标签列表有些临时，并且随着时间的推移可能会变得不再有用 —— 如果你想到一个新的有用标签、为现有标签想出一个更好的名字，或者认为某个标签已经不再适用，请提出意见。</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/python-trio/trio/labels/good%20first%20issue">good first issue</a>：
用于标记相对简单的问题，适合新贡献者开始。</p></li>
<li><p><a class="reference external" href="https://github.com/python-trio/trio/labels/todo%20soon">todo soon</a>：
标记那些已经不再有疑问是否或如何进行的任务，只是等待某人动手解决。</p></li>
<li><p><a class="reference external" href="https://github.com/python-trio/trio/labels/missing%20piece">missing piece</a>：
通常用于标记缺少的重要自包含功能模块。如果你正在寻找更具挑战性的项目来处理，这个标签可能会有用。</p></li>
<li><p><a class="reference external" href="https://github.com/python-trio/trio/labels/potential%20API%20breaker">potential API breaker</a>：
如标签所示。这很重要，因为这些问题是我们需要特别注意的，尤其是当 Trio 开始稳定下来时，尤其是在我们准备发布 1.0 版本之前。</p></li>
<li><p><a class="reference external" href="https://github.com/python-trio/trio/labels/design%20discussion">design discussion</a>：
标记那些涉及重大设计问题的任务；如果你喜欢深入的理论讨论和 API 设计的探讨，浏览这个标签可能会很有趣。</p></li>
<li><p><a class="reference external" href="https://github.com/python-trio/trio/labels/polish">polish</a>：
标记那些最终需要解决的问题，因为它们是正确的做法，但它们处理的是边缘情况，不是最小可行产品的必要部分。有时与 "user happiness"（用户体验）标签重叠。</p></li>
<li><p><a class="reference external" href="https://github.com/python-trio/trio/labels/user%20happiness">user happiness</a>：
仅从名称来看，这个标签可能适用于任何 bug（修复 bug 肯定会让用户更开心！），但我们指的并非如此。这个标签用于标记那些可能让用户“踢到铁板”的地方，或者那些会让用户惊讶并感到兴奋的“生活质量”功能 —— 比如能够“即插即用”的高级测试工具。</p></li>
</ul>
</div>
<input class="tab-input" id="tab-set--13-input--2" name="tab-set--13" type="radio"/><label class="tab-label" for="tab-set--13-input--2">英文</label><div class="tab-content docutils container">
<p>The Trio repository in particular uses a number of labels to try and
keep track of issues. The current list is somewhat ad hoc, and may or
may not remain useful over time – if you think of a new label that
would be useful, a better name for an existing label, or think a label
has outlived its usefulness, then speak up.</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/python-trio/trio/labels/good%20first%20issue">good first issue</a>:
Used to mark issues that are relatively straightforward, and could
be good places for a new contributor to start.</p></li>
<li><p><a class="reference external" href="https://github.com/python-trio/trio/labels/todo%20soon">todo soon</a>: This
marks issues where there aren't questions left about whether or how
to do it, it's just waiting for someone to dig in and do the work.</p></li>
<li><p><a class="reference external" href="https://github.com/python-trio/trio/labels/missing%20piece">missing piece</a>:
This generally marks significant self-contained chunks of missing
functionality. If you're looking for a more ambitious project to
work on, this might be useful.</p></li>
<li><p><a class="reference external" href="https://github.com/python-trio/trio/labels/potential%20API%20breaker">potential API breaker</a>:
What it says. This is useful because these are issues that we'll
want to make sure to review aggressively as Trio starts to
stabilize, and certainly before we reach 1.0.</p></li>
<li><p><a class="reference external" href="https://github.com/python-trio/trio/labels/design%20discussion">design discussion</a>:
This marks issues where there's significant design questions to be
discussed; if you like meaty theoretical debates and discussions of
API design, then browsing this might be interesting.</p></li>
<li><p><a class="reference external" href="https://github.com/python-trio/trio/labels/polish">polish</a>:
Marks issues that it'd be nice to resolve eventually, because it's
the Right Thing To Do, but it's addressing a kind of edge case thing
that isn't necessary for a minimum viable product. Sometimes
overlaps with "user happiness".</p></li>
<li><p><a class="reference external" href="https://github.com/python-trio/trio/labels/user%20happiness">user happiness</a>:
From the name alone, this could apply to any bug (users certainly
are happier when you fix bugs!), but that's not what we mean. This
label is used for issues involving places where users stub their
toes, or for the kinds of quality-of-life features that leave users
surprised and excited – e.g. fancy testing tools that Just Work.</p></li>
</ul>
</div>
</div>
</section>
</section>
<section id="id13">
<h2>治理<a class="headerlink" href="#id13" title="Link to this heading">¶</a></h2>
<p>Governance</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--14-input--1" name="tab-set--14" type="radio"/><label class="tab-label" for="tab-set--14-input--1">中文</label><div class="tab-content docutils container">
<p><a class="reference external" href="https://github.com/njsmith">Nathaniel J. Smith</a> 是 Trio 的 <a class="reference external" href="https://en.wikipedia.org/wiki/Benevolent_dictator_for_life">BDFL</a> （终身仁慈独裁者）。如果项目发展到需要更多结构化管理的程度，我们将考虑其他方案。</p>
</div>
<input class="tab-input" id="tab-set--14-input--2" name="tab-set--14" type="radio"/><label class="tab-label" for="tab-set--14-input--2">英文</label><div class="tab-content docutils container">
<p><a class="reference external" href="https://github.com/njsmith">Nathaniel J. Smith</a> is the Trio <a class="reference external" href="https://en.wikipedia.org/wiki/Benevolent_dictator_for_life">BDFL</a>. If
the project grows to the point where we'd benefit from more structure,
then we'll figure something out.</p>
</div>
</div>
</section>
</section>
</article>
</div>
<footer>
<div class="related-pages">
<a class="next-page" href="releasing.html">
<div class="page-info">
<div class="context">
<span>Next</span>
</div>
<div class="title">准备发布</div>
</div>
<svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
</a>
<a class="prev-page" href="history.html">
<svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
<div class="page-info">
<div class="context">
<span>Previous</span>
</div>
<div class="title">发布历史</div>
</div>
</a>
</div>
<div class="bottom-of-page">
<div class="left-details">
<div class="copyright">
                Copyright © 2017, Nathaniel J. Smith
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
</div>
<div class="right-details">
<div class="icons">
<a aria-label="GitHub" class="muted-link" href="https://github.com/hellowac/trio-zh-cn">
<svg fill="currentColor" stroke="currentColor" stroke-width="0" viewbox="0 0 16 16">
<path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z" fill-rule="evenodd"></path>
</svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<aside class="toc-drawer">
<div class="toc-sticky toc-scroll">
<div class="toc-title-container">
<span class="toc-title">
            On this page
          </span>
</div>
<div class="toc-tree-container">
<div class="toc-tree">
<ul>
<li><a class="reference internal" href="#">为 Trio 及相关项目做出贡献</a><ul>
<li><a class="reference internal" href="#id1">入门</a></li>
<li><a class="reference internal" href="#id2">提供支持</a></li>
<li><a class="reference internal" href="#preparing-pull-requests">准备拉取请求</a><ul>
<li><a class="reference internal" href="#pr">在 PR 中要放什么</a></li>
<li><a class="reference internal" href="#id4">环境</a></li>
<li><a class="reference internal" href="#pull-request-tests">测试</a></li>
<li><a class="reference internal" href="#pull-request-formatting">代码格式</a></li>
<li><a class="reference internal" href="#pull-request-release-notes">发布说明</a></li>
<li><a class="reference internal" href="#pull-request-commit-messages">提交消息</a></li>
<li><a class="reference internal" href="#pull-request-docs">文档</a></li>
</ul>
</li>
<li><a class="reference internal" href="#joining-the-team">加入团队</a></li>
<li><a class="reference internal" href="#id11">管理问题</a><ul>
<li><a class="reference internal" href="#id12">问题标签</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id13">治理</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
</aside>
</div>
</div><script src="_static/documentation_options.js?v=d2451d57"></script>
<script src="_static/doctools.js?v=9bcbadda"></script>
<script src="_static/sphinx_highlight.js?v=dc90522c"></script>
<script src="_static/scripts/furo.js?v=5fa4622c"></script>
<script src="_static/tabs.js?v=3ee01567"></script>
<script src="_static/clipboard.min.js?v=a7894cd8"></script>
<script src="_static/copybutton.js?v=f281be69"></script>
<script src="_static/translations.js?v=beaddf03"></script>
</body>
</html>